/* Do not edit this file to avoid losing your changes when upgrade the theme */
$.extend(!0,BT,{initProductThumbsSlider:function(t){var i=this,e="",a=this.options.productGroup,o=this.selectors.productGroup;t&&(e=t+" "),0<$(e+o.thumbsSlider).length&&$(e+o.thumbsSlider).each(function(){var t={};$.extend(!0,t,a.smallSlider),$(this).hasClass(o.thumbsSliderVerticalClass)&&(t.vertical=!0,t.verticalSwiping=!0),t.prevArrow=$(this).siblings(".slick-prev"),t.nextArrow=$(this).siblings(".slick-next"),i.preInitSlider($(this),!0);$(this).slick(t),$(this).parents(o.wrap)})},destroyProductThumbsSlider:function(t){var i="",e=this.selectors.productGroup;t&&(i=t+" "),0<$(i+e.thumbsSlider).length&&$(i+e.thumbsSlider).each(function(){$(this).slick("unslick")})},pauseCurrentProductVideo:function(t){var i;null!=this.data.productVideo.currentPlayer&&(t.find(this.selectors.mediaBtn).removeClass("hide"),"youtube"==(i=this.data.productVideo.currentType)&&this.data.productVideo.loadYoutubeApi?(this.data.productVideo.currentPlayer.pauseVideo(),$("#"+this.data.productVideo.currentYoutubePlayerId).parents(".youtube-wrapper").addClass("hide")):"vimeo"==i&&this.data.productVideo.loadVimeoApi?(this.data.productVideo.currentPlayer.pause(),$("#"+this.data.productVideo.currentVimeoPlayerId).addClass("hide")):this.data.productVideo.currentPlayer.pause(),this.data.productVideo.currentPlayer=null,this.data.productVideo.currentType=null)},playProductVideo:function(t,i){var e=this.selectors.productGroup,a=i.find(e.video);0<a.length&&(t.find(this.selectors.mediaBtn).addClass("hide"),a.hasClass(e.videoYoutube.replace(".",""))?this.loadCssJsLib("youtube",function(){var t;this.data.productVideo.loadYoutubeApi?this.initYoutubePlayer(a):t=setInterval(function(){YT.loaded&&(clearInterval(t),this.data.productVideo.loadYoutubeApi=!0,this.initYoutubePlayer(a))}.bind(this),100)}.bind(this)):a.hasClass(e.videoVimeo.replace(".",""))?this.loadCssJsLib("vimeo",function(){this.data.productVideo.loadVimeoApi=!0,this.initVimeoPlayer(a)}.bind(this)):(this.data.productVideo.currentType="custom",this.data.productVideo.currentPlayer=a.get(0),this.data.productVideo.currentPlayer.play()))},initYoutubePlayer:function(t){var i=t.attr("data-player-id"),e=t.attr("data-video-id"),a=$("#"+i);a.parents(".youtube-wrapper").removeClass("hide"),t.css("opacity",0),this.data.productVideo.currentYoutubePlayerId=i,this.data.productVideo.currentType="youtube",a.hasClass("loaded")?YT.get(i).playVideo():(a.addClass("loaded"),new YT.Player(i,{height:"480",width:"100%",playerVars:{autohide:0,autoplay:1,branding:0,cc_load_policy:0,controls:1,fs:1,iv_load_policy:3,modestbranding:1,playsinline:0,quality:"hd720",rel:0,showinfo:0,wmode:"opaque"},videoId:e,events:{onReady:function(t){t.target.mute(),t.target.playVideo()}}})),this.data.productVideo.currentPlayer=YT.get(i)},initVimeoPlayer:function(t){var i,e=$("#"+t.attr("data-player-id")),a=e.attr("id");this.data.productVideo.currentType="vimeo",this.data.productVideo.currentVimeoPlayerId=a,null==this.data.productVideo.vimeoPlayers[a]?(e.removeClass("hide"),(i=new Vimeo.Player(e.get(0),{width:800})).setVolume(0),i.play(),this.data.productVideo.currentPlayer=i):(this.data.productVideo.currentPlayer=this.data.productVideo.vimeoPlayers[a],this.data.productVideo.currentPlayer.play())},play3dModel:function(t){t.hasClass("loaded")||(t.trigger("mediaVisible"),t.addClass("loaded"))},init3dModel:function(t,i){var e=$("[data-product-media-type-model]",t);e.length<1||theme.ProductModel.init(e,i)},initProductMainSliderAndZoom:function(t,i,e){var a,s=this,o="",r=this.options.productGroup,l=this.selectors.productGroup;t&&(o=t+" "),0<$(o+l.mainsSlider).length?(a=s.data.cacheWindowWidth<768?i:e,setTimeout(function(){$(o+l.mainsSlider).each(function(){var t={};$.extend(!0,t,r.mainSlider),s.preInitSlider($(this),!0);var d=$(this).slick(t),n=$(this).parents(l.wrap);s.playProductVideo(n,d.find(".slick-current")),s.initProductMainZoom(n),d.on("afterChange",function(t,i,e,a){var o=i.$slider.find(".slick-current "+l.mainLink);0<n.find(l.thumbs).length&&n.find(l.thumbs).find(l.thumb+":not(slick-clone) "+l.thumbLink+'[data-image-id="'+o.attr("data-image-id")+'"]').trigger("click",!0),s.initProductMainZoom(n),s.pauseCurrentProductVideo(n),s.playProductVideo(n,i.$slider.find(".slick-current")),o.hasClass(l.mainLinkModel.replace(".",""))?(s.play3dModel(o),d.slick("slickSetOption","swipe",!1,!1),d.addClass("play-model")):d.hasClass("play-model")&&(d.slick("slickSetOption","swipe",!0,!1),d.removeClass("play-model")),o.hasClass(l.ignoreLightBoxClass)?d.addClass("no-light-box-icon"):d.removeClass("no-light-box-icon")})})}.bind(this),a)):s.initProductMainZoom($(o+l.wrap))},destroyProductMainSliderAndZoom:function(t){var i=this,e="",a=this.selectors.productGroup;t&&(e=t+" "),0<$(e+a.mainsSlider).length&&$(e+a.mainsSlider).each(function(){$(this).slick("unslick");var t=$(this).parents(a.wrap);i.destroyProductMainZoom(t)})},destroyZoom:function(t,i,e){1==e?null!=this.data.zoom[t]&&(this.data.zoom[t].closeZoom(),this.data.zoom[t].destroy(),this.data.zoom[t]=void 0):"object"==typeof this.data.zoom[t]&&null!=this.data.zoom[t]&&null!=this.data.zoom[t][i]&&(this.data.zoom[t][i].closeZoom(),this.data.zoom[t][i].destroy(),this.data.zoom[t][i]=void 0)},initZoom:function(t,i,e,a,o){1==a?(1==o&&null==this.data.zoom[i]||0==o)&&(this.data.zoom[i]=new CloudZoom(t,this.options.productZoom)):(null==this.data.zoom[i]&&(this.data.zoom[i]={}),(1==o&&null==this.data.zoom[i][e]||0==o)&&(this.data.zoom[i][e]=new CloudZoom(t,this.options.productZoom)))},initProductMainZoom:function(t){var i,e,a,o;this.data.cacheWindowWidth<=1200||(i=this.selectors.productGroup,e=this,a=t.attr("data-zoom-scope"),0<(o=t.find(i.main+" "+i.imgZoom).length)&&null!=a&&new Promise(function(t,i){e.loadCssJsLib("zoom",t)}).then(function(){t.find(i.main+" "+i.imgZoom).each(function(){var i=$(this);i.imagesLoaded(function(){var t=i.parent().attr("data-image-id");e.data.cacheWindowWidth>e.options.windowScreen.mobile&&(e.destroyZoom(a,t,o),e.initZoom(i,a,t,o,!1)),$(window).on(e.data.resizeEventName,function(){e.data.cacheWindowWidth>e.options.windowScreen.mobile?e.initZoom(i,a,t,o,!0):e.destroyZoom(a,t,o)})})})},function(t){}))},destroyProductMainZoom:function(t){var i,e,a;this.data.cacheWindowWidth<=1200||(i=this.selectors.productGroup,e=t.attr("data-zoom-scope"),0<(a=t.find(i.main+".slick-current "+i.imgZoom).length)&&null!=e&&this.data.cacheWindowWidth>this.options.windowScreen.mobile&&this.destroyZoom(e,imageId,a))},changeMainImage:function(a,o){var d=this.selectors.productGroup,n=this;a.find(d.mainImg).each(function(){var t=$(this),i=t.attr("data-image-size"),e=null!=i?n.resizeImage(o,i).replace("_1x1.","_{width}x."):o;t.parent(":not(.not-loading)").addClass("loading"),t.attr("data-src",e),t.addClass("lazyload"),a.removeClass(d.loadingClass)})},updateMainThumbnail:function(t,i,e,a){var o,d=this.selectors.productGroup,n=t.find(d.mains);if(0<n.length){var s=null!=a?t.find(d.mainLink+'[data-image-id="'+a+'"]'):t.find(d.mainLink+'[data-image-id="'+i.attr("data-image-id")+'"]');if(n.hasClass(d.mainsSlider.replace(".","")))o=s.parents(".slick-slide").first().attr("data-slick-index"),this.gotoSliderIndex(t.find(d.mainsSlider),o);else if(n.hasClass("scroll-main-hoz")){var r,l=(r=s.parent()).offset().left+n.scrollLeft()-n.offset().left;n.animate({scrollLeft:l+"px"})}else if(n.hasClass("scroll-main-ver")){(r=s.parent()).hasClass("active")||(r.siblings(".active").removeClass("active"),992<this.data.cacheWindowWidth?$("body,html").animate({scrollTop:r.offset().top+"px"},800):(l=r.offset().left+n.scrollLeft()-n.offset().left,n.animate({scrollLeft:l+"px"})),r.addClass("active"))}else if(null==i||0==i.length){if(null==e)return;this.changeMainImage(t,e)}else this.changeMainImage(t,i.attr("href"))}else{if(null==e)return;this.changeMainImage(t,e)}},updateStorePickup:function(e,t){var i,a=this.selectors.productGroup,o=e.find(a.storePickupWrap);0<o.length&&(t.available?(o.addClass("loading-store-data"),i=theme.rootUrl+"variants/"+t.id,this.callAjax(i,"get",{section_id:"store-availability"},null,function(t){var i=$(".store-availability-information",t);0<i.length?(o.find(a.storePickupInner).html(i[0].outerHTML),$("body").find(a.storePickupModel).remove(),$("body").append($(a.storePickupModel,t)),$(a.storePickupProductTitle).text(e.find(".product-single__title").text()),o.hasClass("hide-default-title")&&$(a.storePickupVariantTitle).hide(),o.removeClass("hide")):o.addClass("hide"),o.removeClass("loading-store-data")})):o.addClass("hide"))},updateNewVariant:function(t,o,d,n,i,e,a){var s=this.selectors.productGroup,r=(this.options.productGroup,this);t.find(s.price).html(this.getVariantPriceHtml(t,o)),t.find(s.stickySmallPrice).html(this.getPriceHtml(o.price)),this.convertCurrencySilence(t.find("span.money")),this.updateStorePickup(t,o);var l,c,u=BT.data.outStockGroup[t.attr("data-product-handle")],h=!a&&null!=u,p=[];o.options.length;if(h){t.find(s.option+".last "+s.optionValue).removeClass(s.swatchOutStock),t.find(s.option+".last  option").removeAttr("disabled");for(var m=0;m<o.options.length-1;m++)p.push(o.options[m])}t.find(s.option).each(function(){var e=$(this).attr("data-index"),t=$(this).hasClass("swatch"),a=$(this).hasClass("last");t?($(this).find(".selected,.hide").removeClass("selected hide"),$(this).find(s.optionValue).each(function(){var t;$(this).attr("data-value")==o.options[e]&&$(this).addClass("selected"),(1==e&&-1==d.indexOf($(this).attr("data-value"))||2==e&&-1==n.indexOf($(this).attr("data-value")))&&$(this).addClass("hide"),a&&h&&(p.push($(this).attr("data-value")),t=p.join(" / "),-1<u.indexOf(t)&&$(this).addClass(s.swatchOutStock),p.pop())})):$(this).find(s.optionValue).each(function(){var i;0<e&&(1==e?i=d:2==e&&(i=n),$(this).find("option").each(function(){var t;$(this).removeClass("hide").removeAttr("selected").removeAttr("disabled"),-1==i.indexOf($(this).attr("value"))&&$(this).addClass("hide").attr("disabled","disabled"),a&&h&&(p.push($(this).attr("value")),t=p.join(" / "),-1<u.indexOf(t)&&$(this).attr("disabled","disabled"),p.pop())})),$(this).val(o.options[e])})}),o.available?((c=t.find(s.cartBtn)).removeAttr("disabled"),c.removeClass("soldout"),l=theme.preOrder&&"continue"==o.inventory_policy&&o.inventory_quantity<=0?theme.strings.preOrderText:theme.strings.addToCart,c.attr("title",l),"tooltip"==c.attr("data-toggle")&&c.tooltip("fixTitle"),c.find("span").text(l),t.find(s.stockText).text(theme.strings.instockText).removeClass("soldout")):((c=t.find(s.cartBtn)).attr("disabled","disabled"),c.addClass("soldout"),c.attr("title",theme.strings.soldOut),"tooltip"==c.attr("data-toggle")&&c.tooltip("fixTitle"),c.find("span").text(theme.strings.soldOut),t.find(s.stockText).text(theme.strings.soldOut).addClass("soldout")),t.find(s.variantId).val(o.id),t.find(s.variantId).trigger("change"),0<t.find(s.variantTitle).length&&t.find(s.variantTitle).text(o.title);var f,g,v,y,C,w=t.find(s.thumbLink+'[data-image-id="'+o.featured_media.id+'"]');i&&this.updateMainThumbnail(t,w,o.featured_media.src,o.featured_media.id),null!=t.attr("data-history")&&(g=(f=window.location.href.split("?"))[0]+"?",1<f.length&&f[1]?-1<f[1].indexOf("variant")?g+=f[1].replace(/(variant=).*?(&|$)/,"$1"+o.id+"$2"):g+=f[1]+"&variant="+o.id:g+="variant="+o.id,window.history.replaceState({path:g},"",g)),0<t.find(s.labelDeal).length&&(v=t.find(s.labelDeal),o.compare_at_price&&o.compare_at_price>o.price?(v.removeClass("hide"),0<v.find(s.labelPercent).length&&(y=Math.floor((o.compare_at_price-o.price)/o.compare_at_price*100),v.find(s.labelPercent).html(y+"%"))):v.addClass("hide")),0<t.find(s.singleProgress).length&&(o.available?(t.find(s.singleProgress).removeClass("hide"),0<o.inventory_quantity?(t.find(s.stockText1).removeClass("hide"),t.find(s.stockText2).addClass("hide")):(t.find(s.stockText2).removeClass("hide"),t.find(s.stockText1).addClass("hide")),0<t.find(s.stockNumber).length&&t.find(s.stockNumber).text(o.inventory_quantity)):t.find(s.singleProgress).addClass("hide")),0<t.find(s.syncUrl).length&&(C=t.find(s.syncUrl).attr("href").split("?")[0]+"?variant="+o.id,t.find(s.syncUrl).attr("href",C));var b=t.find(s.sku);0<b.length&&(o.sku?(b.text(o.sku),b.parent().removeClass("hide")):b.parent().addClass("hide")),null!=t.attr("data-sync-pg")&&e&&$(t.attr("data-sync-pg")).each(function(){$(this).find(s.groupData).attr("data-value",t.find(s.groupData).attr("data-value")),r.updateNewVariant($(this),o,d,n,!0,!1,a)})},initMainLightboxGallery:function(){var e=this.selectors.productGroup,a=this;$(document).on("click",e.mainLink,function(t){var i;$(this).hasClass(e.ignoreLightBoxClass)||(t.preventDefault(),0<(i=$(this).siblings(a.selectors.mediaBtn)).length?i.trigger("click",[$(this).attr("data-image-id")]):$(this).parents(e.wrap).find(a.selectors.mediaBtn).trigger("click",[$(this).attr("data-image-id")]))})},openLightboxByPhotoswipe:function(t,o){var d,n,s,i,e,r=this,l=this.selectors.productGroup;0<t.find(l.mainLink).length&&(d=[],s=n=0,t.find(l.mainLink+":not(.hide)").each(function(t,i){var e,a;$(this).hasClass(l.ignoreLightBoxClass)||(a=(a=(e=$(this)).attr("title"))&&a.replace(/ group-(.*?) /g," ").replace(/group-(.*?) /g,"").split("group")[0],null!=o?$(this).attr("data-image-id")==o&&(n=s):$(this).parent().hasClass("active")&&(n=s),d.push({src:e.attr("href"),w:e.attr("data-width"),h:e.attr("data-height"),msrc:r.resizeImage(e.attr("href"),"96x"),title:a,el:e.parent()[0]}),s++)}),i=document.querySelectorAll(".pswp")[0],e={index:n,getThumbBoundsFn:function(t){var i=d[t].el.getElementsByTagName("img")[0],e=window.pageYOffset||document.documentElement.scrollTop,a=i.getBoundingClientRect();return{x:a.left,y:a.top+e,w:a.width}},shareButtons:[]},new PhotoSwipe(i,PhotoSwipeUI_Default,d,e).init())},openLightboxByLightGallery:function(i,o){var d,n,s,r=this,l=this.selectors.productGroup;0<i.find(l.mainLink).length&&(d=[],s=n=0,i.find(l.mainLink+":not(.hide)").each(function(t,i){var e,a;$(this).hasClass(l.ignoreLightBoxClass)||(a=(a=(e=$(this)).attr("title"))&&a.replace(/ group-(.*?) /g," ").replace(/group-(.*?) /g,"").split("group")[0],null!=o?$(this).attr("data-image-id")==o&&(n=s):$(this).parent().hasClass("active")&&(n=s),d.push({src:e.attr("href"),thumb:r.resizeImage(e.attr("href"),"96x"),subHtml:a}),s++)}),rtl&&(d.reverse(),n=s-n-1),i.data("lightGallery")&&i.off("onCloseAfter.lg"),i.lightGallery({dynamic:!0,dynamicEl:d,index:n,download:!1}),i.on("onCloseAfter.lg",function(t){setTimeout(function(){void 0!==i.data("lightGallery")&&i.data("lightGallery").destroy(!0)},300)}))},initMediaButton:function(){var o=this,d=this.selectors.productGroup,n=!1;$(document).on("click",this.selectors.mediaBtn,function(t,i){var e,a;t.preventDefault(),n||(e=$(this).parents(d.wrap),a=$(this),null==i&&(i=null!=a.attr("data-media-id")?a.attr("data-media-id"):e.find(d.mainsSlider+" .slick-current "+d.mainLink).attr("data-image-id")),n=!0,o.startLoadingBtn(a),o.showLoadingFull(),BT.data.cacheWindowWidth<1200?o.loadSnippetAjax("photoswipe",function(){o.loadCssJsLib("photoswipe",function(){setTimeout(function(){o.endLoadingBtn(a),o.hideLoadingFull(),o.openLightboxByPhotoswipe(e,i),n=!1},400)})},300):o.loadCssJsLib("lightgallery",function(){o.endLoadingBtn(a),o.hideLoadingFull(),o.openLightboxByLightGallery(e,i),n=!1}))})},initProductGlobal:function(){this.initMediaButton(),this.initMainLightboxGallery();var m=this.selectors.productGroup,f=(this.options.productGroup,this);$(document).on("click",m.thumbLink,function(t,i){var l,c,u,h,p;t.preventDefault(),$(this).parent().hasClass("active")||(l=$(this),c=l.attr("data-image-id"),u=l.parents(m.wrap),h=!1,null!=t.originalEvent&&(h=!0),l.parent().addClass("active").siblings(".active").removeClass("active"),0<u.find(m.option).length?(p=u.attr("data-product-handle"),new Promise(function(i,t){null==f.data.productGroup[p]?(u.addClass(m.loadingClass),f.callAjax(theme.rootUrl+"products/"+p,"get",{view:"tjson"},null,function(t){f.data.productGroup[p]=$.parseJSON(t.replace("\x3c!-- BEGIN template --\x3e","").replace("\x3c!-- product.tjson --\x3e","").replace("\x3c!-- END template --\x3e","")),u.removeClass(m.loadingClass),i()})):i()}).then(function(){var a,o,e,d=[],n=[],s=0,r=[];u.find(m.option).each(function(){$(this).attr("data-index");var t=$(this).hasClass("swatch")?$(this).find(".selected").attr("data-value"):$(this).find(m.optionValue).val();r.push(t)}),$.each(f.data.productGroup[p],function(t,i){var e;i.featured_media.id==c&&(a=i,e=0,$.each(i.options,function(t,i){r[t]==i&&(e+=3-t)}),s<e&&(o=i,s=e))}),null!=o&&(a=o),null!=a?(e=(r=a.options).length,$.each(f.data.productGroup[p],function(t,i){i.options[0]==r[0]&&1<e&&-1==d.indexOf(i.options[1])&&d.push(i.options[1]),1<e&&i.options[0]==r[0]&&i.options[1]==r[1]&&2<e&&-1==n.indexOf(i.options[2])&&n.push(i.options[2])}),(h||i)&&f.updateNewVariant(u,a,d,n,h,!0,!1)):h&&(l.hasClass("loaded")||(l.addClass("loaded"),u.addClass(m.loadingClass)),f.updateMainThumbnail(u,l))},function(t){})):h&&f.updateMainThumbnail(u,l))})}}),BT.initProductGlobal(),theme.ProductModel=function(){var o={},s={},r={},l="[data-product-single-media-group]",c="[data-shopify-xr]";function d(t){if(!t)if(window.ShopifyXR){for(var i in o)if(o.hasOwnProperty(i)){var e=o[i];if(e.loaded)continue;var a=$("#ModelJson-"+i);window.ShopifyXR.addModels(JSON.parse(a.html())),e.loaded=!0}window.ShopifyXR.setupXRElements()}else document.addEventListener("shopify_xr_initialized",function(){d()})}function i(t){if(!t)for(var i in s){var e;s.hasOwnProperty(i)&&((e=s[i]).modelViewerUi||(e.modelViewerUi=new Shopify.ModelViewerUI(e.$element)),function(t){var i=r[t.sectionId];t.$container.on("mediaVisible",function(){i.$element.attr("data-shopify-model3d-id",t.modelId),BT.data.isTouchDevide||t.modelViewerUi.play()}),t.$container.on("mediaHidden",function(){i.$element.attr("data-shopify-model3d-id",i.defaultId),t.modelViewerUi.pause()}).on("xrLaunch",function(){t.modelViewerUi.pause()})}(e))}}return{init:function(t,n){o[n]={loaded:!1},t.each(function(t){var i,e=$(this),a=e.data("media-id"),o=$(e.find("model-viewer")[0]),d=o.data("model-id");0===t&&(i=e.closest(l).find(c),r[n]={$element:i,defaultId:d}),s[a]={modelId:d,sectionId:n,$container:e,$element:o}}),window.Shopify.loadFeatures([{name:"shopify-xr",version:"1.0",onLoad:d},{name:"model-viewer-ui",version:"1.0",onLoad:i}]),BT.loadCssJsLib("modelViewerUiStyles")},removeSectionModels:function(t){for(var i in s){s.hasOwnProperty(i)&&s[i].sectionId===t&&(s[i].modelViewerUi.destroy(),delete s[i])}delete o[t]}}}();