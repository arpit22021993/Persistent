/* Do not edit this file to avoid losing your changes when upgrade the theme */
$.extend(!0,BT,{loadRecentViewedProductsSingle:function(t){var i,n,e,o,a,r;void 0!==t&&0!=t.length&&(i=this,n=t.find(".recent-view-list"),e=t.attr("data-handle"),parseInt(t.attr("data-limit")),-1<(a=(o=this.getCookieItemsValue(!0,this.options.recentView.cookieName)).indexOf(e))&&o.splice(a,1),0<o.length?(o.reverse(),r=o.join(","),this.callAjax(theme.rootUrl,"GET",{view:"recent_view_slider",q:r},null,function(e){n.hasClass("slick-initialized")&&n.slick("unslick"),n.html(e),0<n.find(".grid__item").length&&(i.convertCurrencySilence(n.find("span.money")),i.applyCustomColorSwatches(n),i.initSlider(t,!1,!1),i.popularAddedWishlistItems(t))})):(n.remove(),t.append('<div class="alert alert-warning">'+theme.strings.recentViewEmpty+"</div>")))},sendRecommendationTrekkieEvent:function(e){var t;window.ShopifyAnalytics&&window.ShopifyAnalytics.lib&&window.ShopifyAnalytics.lib.track&&(t=e.find(".grid__item").length,window.ShopifyAnalytics.lib.track("Product Recommendations Displayed",{theme:Shopify.theme.name,didPageJumpOccur:!0,numberOfRecommendationsDisplayed:t}))},loadRecommendationProduct:function(o){var e,t,a,i,r=this;0<o.length&&(e=o.attr("data-product-id"),t=o.attr("data-limit"),a=o.data("view"),o.hasClass("loaded")?("recommendation"==a?((i=o.children(".cross-sell-list")).addClass(r.selectors.slider.useTouchMobile+" "+r.selectors.slider.default.replace(".","")),r.initSlider(o,!1,!1),r.initDealCountdown(i),r.popularAddedWishlistItems(i)):(i=o.parents(".freb__inner").first(),BTFreBought.init()),r.applyCustomColorSwatches(i)):r.callAjax(theme.recommendationUrl+".json","GET",{product_id:e,limit:t},"json",function(e){var i,n,t;0<e.products.length?(i=[],n={},$.each(e.products,function(e,t){i.push(t.handle),n[t.handle]=t.url}),t=i.join(","),r.callAjax(theme.rootUrl,"GET",{view:a,q:t},null,function(e){var t;"recommendation"==a?((t=o.children(".cross-sell-list")).html(e),t.addClass(r.selectors.slider.useTouchMobile+" "+r.selectors.slider.default.replace(".","")),r.initSlider(o,!1,!1),r.initDealCountdown(t)):(t=o.parents(".freb__inner").first()).append(e),r.addRecommendationUrls(t,n),r.sendRecommendationTrekkieEvent(t),r.convertCurrencySilence(t.find("span.money")),r.applyCustomColorSwatches(t),r.reLoadReview(t),BTFreBought.init(),o.parent().find(".loading-not-full").remove()})):o.hide()},function(){o.hide()}))},initStickyCartProductPage:function(){function t(){$(".sc__close").toggleClass(n),i=!1,$(".sc").toggleClass("open")}var o,i,n;0<$(".sc").length&&(o=this,$(".sc").removeClass("hide"),$(window).on(this.data.scrollEventName,function(e,t){var i,n;o.data.pageLoaded&&0==BT.data.updatingProductOptions&&("down"==t?(i=$(".button--single-cart-main"),n=0<$(".sticky-menu.active").length?$(".sticky-menu").height():0,$(window).scrollTop()+n>i.offset().top?$(".sc").addClass("sc--active"):$(".sc").removeClass("sc--active")):$(".sc").removeClass("sc--active"))}),i=!1,n="sc__close--working",o.data.cacheWindowWidth<992?($(".sc__close").removeClass(n),$(".sc__inner").hide(),$(".sc").removeClass("open")):($(".sc__inner").show(),$(".sc").addClass("open")),$(".sc__close").on("click",function(e){e.preventDefault(),i||(i=!0,$(".sc__inner").toggle("slow",function(){$(".sc__close").toggleClass(n),i=!1,$(".sc").toggleClass("open")}))}),$(".sc__trigger").on("click touchend",function(e){e.preventDefault(),i||(i=!0,$(".sc").hasClass("open"),$(".sc").hasClass("open")?$(".sc__inner").slideUp(300,t):$(".sc__inner").slideDown(300,t))}),$(".qty-box__input--single").on("change",function(){var e=this;$(".qty-box__input--single").each(function(){$(this).is(e)||$(this).val($(e).val())})}))},alignReviewMasonryForm:function(){var e,t,i=$(".product-review-masonry");0<i.length&&(i.removeAttr("style"),(t=(e=$(".product-media-masonry-align")).offset().top+e.outerHeight()+20-i.offset().top)<0&&i.css("margin-top",t+"px"))},initAlignReviewForm:function(){var t;0<$(".product-review-masonry").length&&(this.alignReviewMasonryForm(),t=this,$(window).on(this.data.resizeEventName,function(e){setTimeout(function(){t.alignReviewMasonryForm()},300)}))},initTabAccordion:function(){$(document).on("click",".tab-accordion__trigger",function(e){var t,i;e.preventDefault(),$(this).hasClass("working")||($(this).addClass("working"),(t=$(this)).parent().first().siblings(".nav-tabs"),i=$(t.attr("href")),t.toggleClass("open"),t.hasClass("open")?i.slideDown(300,function(){t.removeClass("working")}):i.slideUp(300,function(){t.removeClass("working")}))}),$(document).on("shown.bs.tab",'.tab-accordion-list a[data-toggle="tab"]',function(e){var t=$(e.target).attr("href"),i=$(t);i.addClass("open").show(),i.siblings('.tab-accordion__trigger[href="'+t+'"]').addClass("open")}),$(document).on("hidden.bs.tab",'.tab-accordion-list a[data-toggle="tab"]',function(e){var t=$(e.target).attr("href"),i=$(t);i.removeClass("open").hide(),i.siblings('.tab-accordion__trigger[href="'+t+'"]').removeClass("open")})},initSizeChart:function(){var r;0<$(".sizechart-trigger").length&&(r=this,$(".sizechart-trigger").unbind("click"),$(".sizechart-trigger").on("click",function(e){var t,i,n,o,a;e.preventDefault(),$(this).hasClass("sizechart-trigger--inline")?(n=0,(i=(t=$(".sizechart-table")).parents(".tab-pane")).hasClass(".active")||(o=i.attr("id"),$('.nav-tab-item a[href="#'+o+'"]').trigger("click"),n=300),setTimeout(function(){var e=t.offset().top-80;0<$(".use-sticky").length&&(e-=60),e+="px",$("body,html").animate({scrollTop:e},800)},n)):(a=$(this).attr("data-modal-id"),r.showPopup("#"+a))})),0<$(".sizeChartModal .rte").length&&($(".sizeChartModal").removeClass("hide"),this.rteWrap(".sizeChartModal .rte"))}}),theme.productTemplate={},theme.ProductTemplateSection=function(e){var t,n=this.$container=$(e),o=this.sectionId=n.attr("data-section-id"),a=this.obj="#ProductSection-"+o,i=n.find(".product-single-json");0<i.length&&(t=i.attr("data-handle"),BT.data.productGroup[t]=$.parseJSON(i.html()),BT.addProductRecentView(t),BT.updateStorePickup(n.find(BT.selectors.productGroup.wrap).first(),BT.data.productGroup[t][i.attr("data-current-variant-id")])),BT.data.loadedSnippets.push("preload-product-single-general.scss");var r=BT.data.cacheWindowWidth<768?2e3:500;BT.initProductThumbsSlider(a),BT.initProductMainSliderAndZoom(a,2300,1500),BT.initDealCountdown(a),BT.applyCustomColorSwatches(a),setTimeout(function(){BT.initStickyCartProductPage(),0<$(".sc").length&&BT.applyCustomColorSwatches(".sc"),BT.rteWrap(a+" .rte");var e=$(".upsell-ele--single");0<e.length&&BT.initScrollingWindowTriggerOnce(e,"upsell_single",-170,function(){BT.loadUpsell(n.find(BT.selectors.upsell.wrap))});var t=$(".rencent-view-ele");0<t.length&&BT.initScrollingWindowTriggerOnce(t,"recent_view_single",-170,function(){BT.loadRecentViewedProductsSingle(t)});var i=$(".load-crossell");0<i.length?BT.loadRecommendationProduct(i):0<$(".freb__inner").length&&BTFreBought.init(),BT.initSizeChart(),BT.runProgressBar(n.find(".progress-bar")),0<$(".pg__review-stars--trigger").length&&($(".pg__review-stars--trigger").unbind("click"),$(".pg__review-stars--trigger").on("click",function(e){e.preventDefault();var t,i,n=$(".pg__review-form"),o=n,a=n.parents(".tab-pane");0<a.length&&(t=a.attr("id"),o=BT.data.cacheWindowWidth<991?$('.tab-accordion__trigger[href="#'+t+'"]'):$('.nav-tab-item a[href="#'+t+'"]'),a.hasClass(".active")||o.trigger("click")),BT.isInViewport(o,window)||(i=o.offset().top-100,0<$(".use-sticky").length&&(i-=60),$("html, body").animate({scrollTop:i},400))})),BT.init3dModel(this.$container,o)}.bind(this),r),theme.productTemplate[a]="#"+n.attr("id")},theme.ProductTemplateSection.prototype=_.assignIn({},theme.ProductTemplateSection.prototype,{onSelect:function(e){e.detail.load&&(BT.reLoadReview(this.obj),BT.alignReviewMasonryForm()),$(e.target).find(".product-single,.sc").removeAttr("data-history")},onBlockSelect:function(e){var t,i=$(e.target),n=$('a[href="#'+i.attr("id")+'"]');i.hasClass("active")||n.trigger("click"),BT.isInViewport(n,e.currentTarget.defaultView)||(t=n.offset().top-100,$("html, body").animate({scrollTop:t},400))},onUnload:function(){delete theme.productTemplate[this.obj],theme.ProductModel.removeSectionModels(this.sectionId)}}),BT.initAlignReviewForm(),BT.initTabAccordion(),theme.sections.constructors.product=theme.ProductTemplateSection;